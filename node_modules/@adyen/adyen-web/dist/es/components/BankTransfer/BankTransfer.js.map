{"version":3,"file":"BankTransfer.js","sources":["../../../../src/components/BankTransfer/BankTransfer.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport { CoreProvider } from '../../core/Context/CoreProvider';\nimport RedirectButton from '../internal/RedirectButton';\nimport { BankTransferConfiguration, BankTransferState } from './types';\nimport BankTransferResult from './components/BankTransferResult';\nimport BankTransferInput from './components/BankTransferInput';\nimport { TxVariants } from '../tx-variants';\n\nexport class BankTransferElement extends UIElement<BankTransferConfiguration> {\n    public static type = TxVariants.bankTransfer_IBAN;\n    public static txVariants = [\n        TxVariants.bankTransfer_IBAN,\n        TxVariants.bankTransfer_BE,\n        TxVariants.bankTransfer_NL,\n        TxVariants.bankTransfer_PL,\n        TxVariants.bankTransfer_FR,\n        TxVariants.bankTransfer_CH,\n        TxVariants.bankTransfer_IE,\n        TxVariants.bankTransfer_GB,\n        TxVariants.bankTransfer_DE\n    ];\n\n    public static defaultProps = {\n        showEmailAddress: true\n    };\n\n    // @ts-ignore Double check why state extends all props\n    public state: BankTransferState = {\n        isValid: !this.props.showEmailAddress,\n        data: {}\n    };\n\n    get isValid() {\n        return !!this.state.isValid;\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData() {\n        const { shopperEmail } = this.state.data;\n        const subtype = this.type !== (TxVariants.bankTransfer_IBAN as string) ? { subtype: 'embedded' } : {};\n\n        return {\n            paymentMethod: {\n                type: this.type,\n                ...subtype\n            },\n            ...(shopperEmail && { shopperEmail })\n        };\n    }\n\n    private handleRef = ref => {\n        this.componentRef = ref;\n    };\n\n    render() {\n        if (this.props.reference) {\n            return (\n                <CoreProvider i18n={this.props.i18n} loadingContext={this.props.loadingContext} resources={this.resources}>\n                    <BankTransferResult ref={this.handleRef} {...this.props} onActionHandled={this.onActionHandled} />\n                </CoreProvider>\n            );\n        }\n\n        return (\n            <CoreProvider i18n={this.props.i18n} loadingContext={this.props.loadingContext} resources={this.resources}>\n                {this.props.showEmailAddress && <BankTransferInput ref={this.handleRef} {...this.props} onChange={this.setState} />}\n                <RedirectButton\n                    {...this.props}\n                    showPayButton={this.props.showPayButton}\n                    name={this.displayName}\n                    onSubmit={this.submit}\n                    payButton={this.payButton}\n                />\n            </CoreProvider>\n        );\n    }\n}\n\nexport default BankTransferElement;\n"],"names":["BankTransferElement","UIElement","isValid","this","state","formatData","shopperEmail","data","subtype","type","TxVariants","bankTransfer_IBAN","paymentMethod","render","props","reference","h","CoreProvider","i18n","loadingContext","resources","BankTransferResult","ref","handleRef","onActionHandled","showEmailAddress","BankTransferInput","onChange","setState","RedirectButton","showPayButton","name","displayName","onSubmit","submit","payButton","super","args","_define_property","componentRef","txVariants","bankTransfer_BE","bankTransfer_NL","bankTransfer_PL","bankTransfer_FR","bankTransfer_CH","bankTransfer_IE","bankTransfer_GB","bankTransfer_DE","defaultProps"],"mappings":"ijBASO,MAAMA,UAA4BC,EAwBrC,WAAIC,GACA,QAASC,KAAKC,MAAMF,OACxB,CAKAG,UAAAA,GACI,MAAMC,aAAEA,GAAiBH,KAAKC,MAAMG,KAC9BC,EAAUL,KAAKM,OAAUC,EAAWC,kBAA+B,CAAEH,QAAS,YAAe,CAAC,EAEpG,MAAO,CACHI,cAAe,CACXH,KAAMN,KAAKM,QACRD,MAEHF,GAAgB,CAAEA,gBAE9B,CAMAO,MAAAA,GACI,OAAIV,KAAKW,MAAMC,UAEPC,EAACC,EAAAA,CAAaC,KAAMf,KAAKW,MAAMI,KAAMC,eAAgBhB,KAAKW,MAAMK,eAAgBC,UAAWjB,KAAKiB,WAC5FJ,EAACK,EAAAA,CAAmBC,IAAKnB,KAAKoB,aAAepB,KAAKW,MAAOU,gBAAiBrB,KAAKqB,mBAMvFR,EAACC,EAAAA,CAAaC,KAAMf,KAAKW,MAAMI,KAAMC,eAAgBhB,KAAKW,MAAMK,eAAgBC,UAAWjB,KAAKiB,WAC3FjB,KAAKW,MAAMW,kBAAoBT,EAACU,EAAAA,CAAkBJ,IAAKnB,KAAKoB,aAAepB,KAAKW,MAAOa,SAAUxB,KAAKyB,WACvGZ,EAACa,EAAAA,IACO1B,KAAKW,MACTgB,cAAe3B,KAAKW,MAAMgB,cAC1BC,KAAM5B,KAAK6B,YACXC,SAAU9B,KAAK+B,OACfC,UAAWhC,KAAKgC,YAIhC,mBArEGC,SAAAC,GAmBHC,EAAAnC,KAAOC,QAA2B,CAC9BF,SAAUC,KAAKW,MAAMW,iBACrBlB,KAAM,CAAA,IAuBV+B,EAAAnC,KAAQoB,aAAYD,IAChBnB,KAAKoC,aAAejB,CAAAA,KA5CxBgB,EADStC,EACKS,OAAOC,EAAWC,mBAChC2B,EAFStC,EAEKwC,aAAa,CACvB9B,EAAWC,kBACXD,EAAW+B,gBACX/B,EAAWgC,gBACXhC,EAAWiC,gBACXjC,EAAWkC,gBACXlC,EAAWmC,gBACXnC,EAAWoC,gBACXpC,EAAWqC,gBACXrC,EAAWsC,kBAGfV,EAdStC,EAcKiD,eAAe,CACzBxB,kBAAkB"}